webpackJsonp([4],{57:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{type:f,payload:e}}function i(e){return{type:p,payload:e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1],a=m[t.type];return a?a(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.GETAREADATA=t.UPDATEAREA=void 0;var l,s=a(20),c=n(s),o=a(23),d=n(o);t.updateArea=r,t.getAreaData=i,t.default=u;var f=t.UPDATEAREA="UPDATEAREA",p=t.GETAREADATA="GETAREADATA",m=(l={},(0,c.default)(l,f,function(e,t){return(0,d.default)({},e,{area:t.payload})}),(0,c.default)(l,p,function(e,t){return(0,d.default)({},e,{data:t.payload})}),l),h={area:"全部区域",data:{}}},236:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(9),i=n(r),u=a(4),l=n(u),s=a(10),c=n(s),o=a(7),d=n(o),f=a(6),p=n(f),m=a(1),h=n(m),y=a(19);a(345);var A=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"isEmptyObject",value:function(e){var t=void 0;for(t in e)return!1;return!0}},{key:"render",value:function(){var e=this.props.cinema.data,t=this.props.cinema.area;return!this.isEmptyObject(e)&&t||(e={"全部区域":[]},t="全部区域"),h.default.createElement("ul",{id:"ci-lists"},e[t].map(function(e){return h.default.createElement("li",{key:e.id},h.default.createElement(y.Link,{to:"/cinema/detail/"+e.id},h.default.createElement("div",{className:"ci-name"},h.default.createElement("span",null,e.cinemaName),h.default.createElement("span",{className:"k-mode",style:{display:"4K厅"===e.showMark?"inline-block":"none"}},"4K厅"),h.default.createElement("span",{className:"k-mode",style:{display:"IMAX厅"===e.showMark?"inline-block":"none"}},"IMAX厅"),h.default.createElement("span",{className:"k-mode",style:{display:"巨幕厅"===e.showMark?"inline-block":"none"}},"巨幕厅")),h.default.createElement("p",{className:"ci-address"},e.address),h.default.createElement("div",{className:"ci-welfare"},h.default.createElement("span",{className:"label-mod label-border-blue"},"座"),h.default.createElement("span",{className:"label-mod label-orange"},"新人专享"),h.default.createElement("span",{className:"label-mod"},"¥ 18.8元起"))))}))}}]),t}(m.Component);t.default=A,A.propTypes={cinema:h.default.PropTypes.object.isRequired}},237:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(9),i=n(r),u=a(4),l=n(u),s=a(10),c=n(s),o=a(7),d=n(o),f=a(6),p=n(f),m=a(1),h=n(m),y=a(238),A=n(y),v=a(236),E=n(v),k=function(e){function t(e){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return h.default.createElement("section",null,h.default.createElement(A.default,this.props),h.default.createElement(E.default,this.props))}}]),t}(m.Component);k.propTypes={},t.default=k},238:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(20),i=n(r),u=a(23),l=n(u),s=a(9),c=n(s),o=a(4),d=n(o),f=a(10),p=n(f),m=a(7),h=n(m),y=a(6),A=n(y),v=a(1),E=n(v),k=a(17),_=n(k);a(346);var b=function(e){function t(e){(0,d.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.state={area:"全部区域",showArea:!1,allArea:[],regionOrder:[],regionCinemas:{}},a}return(0,A.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){this.getAreaData(this.props.city.name)}},{key:"componentWillReceiveProps",value:function(e){this.props.city.name!=e.city.name&&(this.getAreaData(e.city.name),this.props.updateArea("全部区域"))}},{key:"showCity",value:function(){this.props.showCity()}},{key:"showAreaBox",value:function(){this.setState({showArea:!0})}},{key:"cancelAreaBox",value:function(e){"ci-mask"===e.target.id&&this.setState({showArea:!1})}},{key:"getAreaData",value:function(e){var t=this,a=this.matchCityStr(e);this.props.requestData("/movie/cinema/?city="+a).then(function(e){var a=e.data.data.returnValue.regionOrder,n=e.data.data.returnValue.regionCinemas,r=[];a.forEach(function(e){n[e].forEach(function(e){r.push(e)})}),a.unshift("全部区域"),n=(0,l.default)({"全部区域":r},n),t.setState({allArea:r,regionOrder:a,regionCinemas:n}),t.props.getAreaData(n)})}},{key:"matchCityStr",value:function(e){var t=["bj","sh","gz"],a=t[Math.floor(3*Math.random())];switch(e){case"北京":return"bj";case"上海":return"sh";case"广州":return"gz";default:return a}}},{key:"selectAreaAction",value:function(e){var t=e.target.innerHTML.trim(),a=/([\u4e00-\u9fa5]*)\（/;this.setState({area:a.exec(t)[1],showArea:!1}),this.props.updateArea(a.exec(t)[1])}},{key:"render",value:function(){var e=this;return E.default.createElement("section",{id:"ci-mask",className:(0,_.default)({mask:this.state.showArea}),onClick:this.cancelAreaBox.bind(this)},E.default.createElement("header",{className:"ci-header"},E.default.createElement("div",{onClick:this.showCity.bind(this)},E.default.createElement("span",{className:"ci-n"},this.props.city.name),E.default.createElement("span",{className:"ci-i"})),E.default.createElement("div",{onClick:this.showAreaBox.bind(this)},E.default.createElement("span",{className:"ci-n"},this.props.cinema.area),E.default.createElement("span",{className:"ci-i"}))),E.default.createElement("ul",{className:"area-list",onClick:this.selectAreaAction.bind(this),style:{display:this.state.showArea?"block":"none"}},this.state.regionOrder.map(function(t){return E.default.createElement("li",{key:t},t+"（"+e.state.regionCinemas[t].length+"）")})))}}]),t}(v.Component);t.default=b,b.propTypes=(0,i.default)({city:E.default.PropTypes.object.isRequired,updateArea:E.default.PropTypes.func.isRequired,showCity:E.default.PropTypes.func.isRequired,requestData:E.default.PropTypes.func.isRequired,getAreaData:E.default.PropTypes.func.isRequired},"updateArea",E.default.PropTypes.func.isRequired)},239:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(33),i=a(57),u=a(31),l=a(45),s=a(237),c=n(s),o={updateArea:i.updateArea,getAreaData:i.getAreaData,requestData:u.requestData,receiveData:u.receiveData,showCity:l.showCity},d=function(e){return{cinema:e.cinema,request:e.request,city:e.city}};t.default=(0,r.connect)(d,o)(c.default)},345:335,346:335});